---
interface Props {
    placeholder?: string;
    currentQuery?: string;
}
const { placeholder = "Search...", currentQuery = "" } = Astro.props;
const currentUrl = Astro.url;
const params = currentUrl.searchParams;
---
<form method="get" class="relative w-full max-w-sm">
    {Array.from(params.entries()).map(([key, value]) => {
        if (key !== 'q' && key !== 'page') return <input type="hidden" name={key} value={value} />;
    })}
    <div class="relative">
        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <svg class="h-4 w-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
        </div>
        <input type="text" name="q" value={currentQuery} placeholder={placeholder} class="block w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-plm-gold focus:border-plm-gold sm:text-sm transition duration-150 ease-in-out"/>
    </div>
    <button type="submit" class="hidden">Search</button>
</form>